@using Microsoft.AspNetCore.Identity

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
<!-- Navigation -->

<header class="main-header">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark2 fixed-top">
        <div class="container">
            <a class="navbar-brand" href="/Home/Index">Nikita Kirav</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="line"></span>
                <span class="line"></span>
                <span class="line" style="margin-bottom: 0;"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item primary-blog">
                        <a class="nav-link" href="@Url.Action("Index", "Articles")">BLOG</a>
                    </li>
                    <li class="nav-item primary-docs">
                        <a class="nav-link" href="@Url.Action("Index", "Art")">ART</a>
                    </li>
                    <li class="nav-item">
                        @if (SignInManager.IsSignedIn(User))
                        {
                            <form asp-controller="Account" asp-action="LogOff" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })" method="post" id="logoutForm" class="navbar-right nav-icon">
                                <ul class="navbar-nav ml-auto">
                                    @if (User.IsInRole("admin"))
                                    {
                                        <li class="dropdown nav-item" id="userLogin">
                                            <div class="dropbtn">
                                                <svg version="1.1" x="0px" y="0px" id="users"
                                                     width="30" height="30" viewBox="0 0 45.532 45.532" style="enable-background:new 0 0 45.532 45.532;"
                                                     xml:space="preserve">
                                                <path d="M22.766,0.001C10.194,0.001,0,10.193,0,22.766s10.193,22.765,22.766,22.765c12.574,0,22.766-10.192,22.766-22.765
		                                                            S35.34,0.001,22.766,0.001z M22.766,6.808c4.16,0,7.531,3.372,7.531,7.53c0,4.159-3.371,7.53-7.531,7.53
		                                                            c-4.158,0-7.529-3.371-7.529-7.53C15.237,10.18,18.608,6.808,22.766,6.808z M22.761,39.579c-4.149,0-7.949-1.511-10.88-4.012
		                                                            c-0.714-0.609-1.126-1.502-1.126-2.439c0-4.217,3.413-7.592,7.631-7.592h8.762c4.219,0,7.619,3.375,7.619,7.592
		                                                            c0,0.938-0.41,1.829-1.125,2.438C30.712,38.068,26.911,39.579,22.761,39.579z" />

                                                </svg>
                                                <label class="nameUser2">@UserManager.GetUserName(User)</label>
                                            </div>
                                            <div id="myDropdown" class="dropdown-content">
                                                <label class="nameUser">@UserManager.GetUserName(User)</label>
                                                <a class="nav-link" href="@Url.Action("Index", "AdminBoard")">AdminBoard</a>
                                                <button type="submit" class="btn btn-link navbar-btn nav-link">Logout</button>
                                            </div>
                                        </li>

                                    }
                                    else
                                    {

                                        <li class="dropdown nav-item" id="userLogin">
                                            <div class="dropbtn">
                                                <svg version="1.1" x="0px" y="0px" id="users"
                                                     width="30" height="30" viewBox="0 0 45.532 45.532" style="enable-background:new 0 0 45.532 45.532;"
                                                     xml:space="preserve">
                                                <path d="M22.766,0.001C10.194,0.001,0,10.193,0,22.766s10.193,22.765,22.766,22.765c12.574,0,22.766-10.192,22.766-22.765
		                                                            S35.34,0.001,22.766,0.001z M22.766,6.808c4.16,0,7.531,3.372,7.531,7.53c0,4.159-3.371,7.53-7.531,7.53
		                                                            c-4.158,0-7.529-3.371-7.529-7.53C15.237,10.18,18.608,6.808,22.766,6.808z M22.761,39.579c-4.149,0-7.949-1.511-10.88-4.012
		                                                            c-0.714-0.609-1.126-1.502-1.126-2.439c0-4.217,3.413-7.592,7.631-7.592h8.762c4.219,0,7.619,3.375,7.619,7.592
		                                                            c0,0.938-0.41,1.829-1.125,2.438C30.712,38.068,26.911,39.579,22.761,39.579z" />

                                                        </svg>
                                                <label class="nameUser2">@UserManager.GetUserName(User)</label>
                                            </div>
                                            <div id="myDropdown" class="dropdown-content">
                                                <label class="nameUser">@UserManager.GetUserName(User)</label>
                                                <button type="submit" class="btn btn-link navbar-btn nav-link">Logout</button>
                                            </div>
                                        </li>
                                    }
                                </ul>
                            </form>
                        }
                        else
                        {
                            <ul class="navbar-nav ml-auto">
                                <li class="nav-item nav-icon">
                                    <a asp-controller="Account" asp-action="Login">
                                        <svg height="20pt" id="enterLogin" viewBox="0 -11 512 512" width="20pt"><path d="m474.667969 341.332031h-5.335938v-32c0-29.394531-23.933593-53.332031-53.332031-53.332031s-53.332031 23.9375-53.332031 53.332031v32h-5.335938c-20.585937 0-37.332031 16.746094-37.332031 37.335938v74.664062c0 20.589844 16.746094 37.335938 37.332031 37.335938h117.335938c20.585937 0 37.332031-16.746094 37.332031-37.335938v-74.664062c0-20.589844-16.746094-37.335938-37.332031-37.335938zm-80-32c0-11.753906 9.578125-21.332031 21.332031-21.332031s21.332031 9.578125 21.332031 21.332031v32h-42.664062zm0 0" /><path d="m288 378.667969c0-28.800781 17.644531-53.527344 42.667969-64v-5.335938c0-12.96875 3.132812-25.128906 8.339843-36.160156-16.128906-10.816406-35.5-17.171875-56.339843-17.171875h-181.335938c-55.871093 0-101.332031 45.460938-101.332031 101.332031v74.667969c0 8.832031 7.167969 16 16 16h272zm0 0" /><path d="m298.667969 106.667969c0 58.910156-47.757813 106.664062-106.667969 106.664062s-106.667969-47.753906-106.667969-106.664062c0-58.910157 47.757813-106.667969 106.667969-106.667969s106.667969 47.757812 106.667969 106.667969zm0 0" /></svg>
                                    </a>
                                </li>
                            </ul>
                        }
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>
<script type="text/javascript">$(document).ready(function ($) {
        var url = document.location.href;
        $.each($("#navbarResponsive a"), function () {
            if (this.href == url) {
                $(this).addClass('active');
            }
        });
    });

    var list = document.getElementById("myDropdown");
    const svg = document.getElementById('userLogin');
    if (svg) {
        svg.addEventListener('click', event => {
            list.classList.toggle("show");
        });
    }


// Close the dropdown if the user clicks outside of it
window.onclick = function (e) {
    if (!document.getElementsByClassName('dropdown')[0].contains(e.target)){
    var myDropdown = document.getElementById("myDropdown");
      if (myDropdown.classList.contains('show')) {
        myDropdown.classList.remove('show');
      }
  }
}</script>
